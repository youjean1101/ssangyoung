<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="/a00_com/a01_common.css" rel="stylesheet">
<style type="text/css">
/*

*/

</style>
<script>
/*

 */
</script>
</head>
<body>
	<h2>부서정보로딩</h2>
	<table id="tab01">
		<thead><tr><th>부서번호</th><th>부서명</th><th>지역</th></tr></thead>
		<tbody></tbody>
	</table>
	<div id="container"></div>


</body>
<script type="text/javascript">
var div = document.querySelector("#container")
var h2Ob = document.querySelector("h2")
var tdOb = document.querySelector("#tab01 tbody")

h2Ob.onclick = callAjax
function callAjax(){
	var xhr = new XMLHttpRequest()
	xhr.open("get","z14_deptJson.jsp",true)
	xhr.send()
	xhr.onreadystatechange=function(){
		if(xhr.readyState==4&&xhr.status==200){
			console.log(xhr.responseText)
			var dlist = JSON.parse(xhr.responseText)
			var adHTML=""
			dlist.forEach(function(dept){
				adHTML+="<tr>"
				adHTML+="<td>"+dept.deptno+"</td>"
				adHTML+="<td>"+dept.dname+"</td>"
				adHTML+="<td>"+dept.loc+"</td>"
				adHTML+="</tr>"
			})
			tdOb.innerHTML +=adHTML
		}
	}
}
</script>
</html>